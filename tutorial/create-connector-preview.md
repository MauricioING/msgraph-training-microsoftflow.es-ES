<!-- markdownlint-disable MD002 MD041 -->

<span data-ttu-id="39a1f-101">En este ejercicio, creará un nuevo conector personalizado que se puede usar en flujo o en aplicaciones lógicas de Azure.</span><span class="sxs-lookup"><span data-stu-id="39a1f-101">In this exercise, you will create a new custom connector which can be used in Flow or in Azure Logic Apps.</span></span> <span data-ttu-id="39a1f-102">El archivo de definición de la API abierta se crea previamente con la ruta de acceso `$batch` correcta para el punto de conexión de Microsoft Graph y la configuración adicional para habilitar la importación simple.</span><span class="sxs-lookup"><span data-stu-id="39a1f-102">The Open API definition file is prebuilt with the correct path for the Microsoft Graph `$batch` endpoint and additional settings to enable simple import.</span></span>

<span data-ttu-id="39a1f-103">Con un editor de texto, cree un nuevo archivo vacío `MSGraph-Delegate-Batch.swagger.json` denominado y agregue el siguiente código.</span><span class="sxs-lookup"><span data-stu-id="39a1f-103">Using a text editor, create a new empty file named `MSGraph-Delegate-Batch.swagger.json` and add the following code.</span></span>

[!code-json[](../LabFiles/MSGraph-Delegate-Batch.swagger.json)]

<span data-ttu-id="39a1f-104">Abra un explorador y vaya a [Microsoft Flow](https://flow.microsoft.com).</span><span class="sxs-lookup"><span data-stu-id="39a1f-104">Open a browser and navigate to [Microsoft Flow](https://flow.microsoft.com).</span></span> <span data-ttu-id="39a1f-105">Inicie sesión con su cuenta de administrador de inquilinos de Office 365.</span><span class="sxs-lookup"><span data-stu-id="39a1f-105">Sign in with your Office 365 tenant administrator account.</span></span> <span data-ttu-id="39a1f-106">En el menú de la izquierda, expanda **datos** y elija **conectores personalizados**.</span><span class="sxs-lookup"><span data-stu-id="39a1f-106">In the left-hand menu, expand **Data** and choose **Custom connectors**.</span></span>

![Captura de pantalla del elemento de menú conectores personalizados en Microsoft Flow](./images/flow-conn1.png)

<span data-ttu-id="39a1f-108">En la página **conectores personalizados** , elija el vínculo **nuevo conector personalizado** en la parte superior derecha y, a continuación, seleccione el elemento **importar un archivo de OpenAPI** en el menú desplegable.</span><span class="sxs-lookup"><span data-stu-id="39a1f-108">On the **Custom connectors** page choose the **New custom connector** link in the top right, then select the **Import an OpenAPI file** item in the drop-down menu.</span></span> <span data-ttu-id="39a1f-109">Escriba `MS Graph Batch Connector` en el cuadro de texto **nombre del conector** .</span><span class="sxs-lookup"><span data-stu-id="39a1f-109">Enter `MS Graph Batch Connector` in the **Connector name** text box.</span></span> <span data-ttu-id="39a1f-110">Elija el botón **importar** para cargar el archivo de la API abierta.</span><span class="sxs-lookup"><span data-stu-id="39a1f-110">Choose **Import** button to upload the Open API file.</span></span> <span data-ttu-id="39a1f-111">Busque el `MSGraph-Delegate-Batch.swagger.json` archivo que ha creado.</span><span class="sxs-lookup"><span data-stu-id="39a1f-111">Browse to the `MSGraph-Delegate-Batch.swagger.json` file you created.</span></span> <span data-ttu-id="39a1f-112">Elija **continuar** para cargar el archivo OpenAPI.</span><span class="sxs-lookup"><span data-stu-id="39a1f-112">Choose **Continue** to upload the OpenAPI file.</span></span>

 ![Captura de pantalla del cuadro de diálogo crear conector personalizado](./images/flow-conn3.png)

<span data-ttu-id="39a1f-114">En la página Configuración del conector, elija el vínculo **seguridad** en el menú de navegación.</span><span class="sxs-lookup"><span data-stu-id="39a1f-114">On the connector configuration page, choose the **Security** link in the navigation menu.</span></span> <span data-ttu-id="39a1f-115">Rellene los campos como se indica a continuación.</span><span class="sxs-lookup"><span data-stu-id="39a1f-115">Fill in the fields as follows.</span></span>

- <span data-ttu-id="39a1f-116">**Elija qué autenticación implementa la API**:`OAuth 2.0`</span><span class="sxs-lookup"><span data-stu-id="39a1f-116">**Choose what authentication is implemented by your API**: `OAuth 2.0`</span></span>
- <span data-ttu-id="39a1f-117">**Proveedor de identidad**:`Azure Active Directory`</span><span class="sxs-lookup"><span data-stu-id="39a1f-117">**Identity Provider**: `Azure Active Directory`</span></span>
- <span data-ttu-id="39a1f-118">**Identificador de cliente**: identificador de la aplicación que creó en el ejercicio anterior.</span><span class="sxs-lookup"><span data-stu-id="39a1f-118">**Client id**: the application ID you created in the previous exercise</span></span>
- <span data-ttu-id="39a1f-119">**Secreto de cliente**: la clave que creó en el ejercicio anterior</span><span class="sxs-lookup"><span data-stu-id="39a1f-119">**Client secret**: the key you created in the previous exercise</span></span>
- <span data-ttu-id="39a1f-120">**Dirección URL de inicio de sesión**:`https://login.windows.net`</span><span class="sxs-lookup"><span data-stu-id="39a1f-120">**Login url**: `https://login.windows.net`</span></span>
- <span data-ttu-id="39a1f-121">**Identificador de inquilino**:`common`</span><span class="sxs-lookup"><span data-stu-id="39a1f-121">**Tenant ID**: `common`</span></span>
- <span data-ttu-id="39a1f-122">**Dirección URL**del `https://graph.microsoft.com` recurso: (sin finalización/)</span><span class="sxs-lookup"><span data-stu-id="39a1f-122">**Resource URL**: `https://graph.microsoft.com` (no trailing /)</span></span>
- <span data-ttu-id="39a1f-123">**Ámbito**: dejar en blanco</span><span class="sxs-lookup"><span data-stu-id="39a1f-123">**Scope**: Leave blank</span></span>

<span data-ttu-id="39a1f-124">Elija **crear conector** en la parte superior derecha</span><span class="sxs-lookup"><span data-stu-id="39a1f-124">Choose **Create Connector** on the top-right</span></span>

![Captura de pantalla de la pestaña seguridad en la configuración del conector](./images/flow-conn4.png)

<span data-ttu-id="39a1f-126">Una vez creado el conector, copie la **dirección URL de redireccionamiento**generada.</span><span class="sxs-lookup"><span data-stu-id="39a1f-126">After the connector has been created, copy the generated **Redirect URL**.</span></span>

![Captura de pantalla de la dirección URL de redireccionamiento generada](./images/flow-conn5.png)

<span data-ttu-id="39a1f-128">Vuelva a la aplicación registrada en el [portal de Azure](https://aad.portal.azure.com) que creó en el ejercicio anterior.</span><span class="sxs-lookup"><span data-stu-id="39a1f-128">Go back to the registered application in the [Azure Portal](https://aad.portal.azure.com) you created in the previous exercise.</span></span> <span data-ttu-id="39a1f-129">Seleccione **información general** en la hoja **aplicación para lotes de MS Graph** y, a continuación, seleccione **Agregar un URI de redireccionamiento**.</span><span class="sxs-lookup"><span data-stu-id="39a1f-129">Select **Overview** on the **MS Graph Batch App** blade, then select **Add a Redirect URI**.</span></span> <span data-ttu-id="39a1f-130">Agregue la **URL de redireccionamiento** que ha copiado en el campo **URI de redireccionamiento** y elija **Guardar**.</span><span class="sxs-lookup"><span data-stu-id="39a1f-130">Add the **Redirect URL** you copied in the **Redirect URI** field and choose **Save**.</span></span>

![Captura de pantalla de la hoja direcciones URL de respuesta en Azure portal](./images/flow-conn-preview6.png)
